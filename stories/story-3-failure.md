# История 3: Неудача и уроки

Пример истории о профессиональной ошибке и извлечённых уроках.

---

## Метаданные

**Название истории:** Production incident из-за непротестированной миграции

**Категория:** Failure

**Покрывает черты Googleyness:**
- [ ] Ambiguity
- [x] Humility
- [ ] Bias for Action
- [x] Doing the Right Thing
- [x] Ownership
- [x] High Standards
- [ ] Innovation
- [ ] Collaboration

**Покрывает Leadership сигналы:**
- [ ] Initiative
- [ ] Influence
- [ ] Mentorship
- [ ] Driving Results
- [x] Decision Making

**Подходит для вопросов:**
1. Tell me about your biggest professional mistake
2. Describe a time when you failed
3. Tell me about a time you received critical feedback

---

## STAR структура

### Situation (30 секунд)

**Контекст:**
- Компания/проект: [Ваша компания], e-commerce платформа
- Ваша роль: Software Engineer, owner миграции базы данных
- Размер команды: 5 человек
- Временной период: 2 года назад

**Background:**
Мы мигрировали с MySQL на PostgreSQL для нового функционала. Я отвечал за миграцию данных и schema changes. Проект был под давлением из-за запуска новой фичи, зависящей от PostgreSQL.

---

### Task (15 секунд)

**Ваша ответственность:**
Спроектировать и выполнить миграцию данных с zero downtime, обеспечив data integrity.

**Constraints:**
- Дедлайн через 2 недели (фича уже анонсирована)
- 50M записей в основных таблицах
- Production трафик 24/7, нельзя останавливать

**Почему это было сложно:**
Сжатые сроки + критичность данных + давление от бизнеса.

---

### Action (1.5 минуты)

**Что я сделал (неправильно):**
Под давлением дедлайна я сократил тестирование. Провёл миграцию на staging с семплом данных (10%), вместо полного объёма. Schema migration прошла успешно, и я решил, что ready for production.

**Что пошло не так:**
При миграции в production обнаружилась проблема с encoding в 5% записей — специфичные unicode символы в именах пользователей. Staging тест не покрыл эти edge cases. Migration скрипт падал на этих записях.

**Как я это обнаружил:**
Через 30 минут после начала миграции — мониторинг показал рост ошибок. Пользователи из Asia-Pacific не могли логиниться.

**Что я сделал (для исправления):**

**Шаг 1: Immediate response**
Немедленно остановил миграцию. Уведомил команду и on-call. Взял на себя коммуникацию с менеджментом — честно объяснил, что это моя ошибка.

**Шаг 2: Mitigation**
За 2 часа написал fix для encoding issue. Создал fallback: пользователи с проблемами редиректились на старую систему.

**Шаг 3: Recovery**
Провёл полный data validation перед продолжением. Написал comprehensive тест suite для всех encoding edge cases. Миграция завершилась успешно через 4 часа.

**Шаг 4: Post-mortem**
Инициировал blameless post-mortem. Взял полную ответственность, без попыток обвинить дедлайн или давление.

---

### Result (30 секунд)

**Количественные результаты:**
- 4 часа degraded experience для ~5% пользователей (Asia-Pacific)
- 0 потерянных данных
- Миграция завершена успешно

**Что изменилось после:**
- Ввели mandatory full-data testing для всех migrations
- Создал checklist для database migrations, который стал стандартом
- Добавили pre-migration validation step в pipeline

**Качественные результаты:**
- Менеджер отметил мою ownership — как я взял ответственность, а не искал оправданий
- Команда стала серьёзнее относиться к testing edge cases

---

### Learning

**Главный урок:**
Давление дедлайна — не оправдание для shortcuts. Если тестирование неполное, нужно либо выделить время, либо эскалировать риски, а не молча надеяться.

**Что бы сделали иначе:**
1. Настоял бы на full-data test, даже если это означало сдвиг дедлайна
2. Чётко коммуницировал бы риски менеджменту ДО инцидента
3. Разбил бы миграцию на smaller batches с validation между ними

**Как применяете сейчас:**
Правило: "If I'm cutting corners under pressure, I escalate instead." Всегда документирую и коммуницирую риски до того, как они становятся проблемами.

---

## Подготовка к Follow-up

### О чувствах
**Вопрос:** "How did it feel when you realized the mistake?"
**Ответ:** Ужасно. Первая реакция — паника и желание как-то скрыть. Но я сразу понял, что transparency — единственный правильный путь. Легче не стало, но это было правильно.

### О blame
**Вопрос:** "Did you blame the deadline?"
**Ответ:** Нет. Дедлайн был tight, но решение сократить тестирование было моим. Я мог эскалировать risk или попросить больше времени. Я выбрал shortcut — это моя ответственность.

### О последствиях
**Вопрос:** "Were there consequences for you?"
**Ответ:** Формально нет — blameless culture. Неформально — я чувствовал, что должен заслужить trust обратно. Следующие несколько месяцев был особенно тщательным с testing и documentation.

### О предотвращении
**Вопрос:** "How do you prevent this now?"
**Ответ:** Три вещи: 1) checklist для migrations, 2) mandatory full-data testing в staging, 3) явная risk коммуникация если вижу shortcuts.

---

## Тайминг

| Секция | Целевое время | Реальное время |
|--------|---------------|----------------|
| Situation | 30 сек | |
| Task | 15 сек | |
| Action | 90 сек | |
| Result | 30 сек | |
| **Итого** | **2:45** | |

---

## Важные заметки для этой истории

### Как рассказывать о неудачах

✅ **DO:**
- Взять полную ответственность
- Быть конкретным о том, что пошло не так
- Показать learning и изменения
- Продемонстрировать growth

❌ **DON'T:**
- Обвинять других или обстоятельства
- Минимизировать серьёзность
- Показывать, что не извлекли уроков
- Выбирать "fake failure" (которая на самом деле success)

---

## Версия для быстрого повторения

**One-liner:** Вызвал production incident из-за недостаточного тестирования миграции БД, взял ответственность, быстро исправил, и создал процессы для предотвращения.

**Ключевые точки:**
1. Сократил тестирование под давлением дедлайна
2. 5% пользователей affected на 4 часа из-за encoding issue
3. Быстро исправил, взял ownership, провёл blameless post-mortem
4. Урок: shortcuts под давлением → эскалация, не молчаливый risk
